# 📧 提高邮件送达率的方案

## 🎯 当前情况

- ✅ Brevo API 调用成功
- ✅ Brevo Dashboard 显示 "Sent"
- ❌ Gmail 收件箱未收到

**结论**: 邮件已从 Brevo 发送，但可能被 Gmail 过滤或延迟。

---

## 🔍 立即检查清单

### ✅ 1. 垃圾邮件文件夹（90% 的情况）

1. 打开 Gmail
2. 点击左侧 **"垃圾邮件"** 文件夹
3. 搜索: `Citea` 或 `验证码`
4. 如果找到了：
   - 点击邮件
   - 选择 **"这不是垃圾邮件"**
   - 邮件会移到收件箱

### ✅ 2. Gmail 搜索

在 Gmail 搜索框中输入：
- `from:noreply@brevo.com`
- `Citea`
- `验证码`
- `验证您的 Citea 账号`

### ✅ 3. 促销内容标签

1. 在 Gmail 左侧找到 **"促销内容"** 标签
2. 检查是否有 Citea 的邮件

### ✅ 4. 全部邮件搜索

1. 在 Gmail 搜索框输入：`in:all Citea`
2. 这会搜索所有文件夹（包括垃圾邮件）

---

## 🛠️ 长期解决方案

### 方案 1: 验证发件域名（推荐）

**为什么**: 使用验证过的域名发送，送达率显著提高

**步骤**:
1. 在 Brevo Dashboard 添加你的域名
2. 配置 DNS 记录（SPF, DKIM, DMARC）
3. 验证域名
4. 使用验证过的邮箱作为发件人

**优点**:
- ✅ 送达率提升 90%+
- ✅ 不易进入垃圾邮件
- ✅ 更专业

### 方案 2: 使用 Brevo 默认邮箱（当前）

**当前状态**: 使用 `noreply@brevo.com`

**问题**: 
- 很多邮件服务商不信任默认邮箱
- 容易被标记为垃圾邮件

**临时解决**:
- 将发件人添加到 Gmail 联系人
- 标记为"不是垃圾邮件"

### 方案 3: 使用专业的发件邮箱

**建议**:
- 使用 `hello@yourdomain.com`
- 或 `noreply@yourdomain.com`（自定义域名）

---

## 🔧 立即可以做的

### 1. 添加发件人到联系人

1. 打开 Gmail
2. 如果有收到邮件（在垃圾邮件）：
   - 点击发件人地址
   - 选择 **"添加到联系人"**
3. 未来邮件会直接进入收件箱

### 2. 创建 Gmail 过滤器

1. Gmail 设置 → 过滤器和已屏蔽的地址
2. 创建过滤器：
   - 发件人包含: `brevo.com` 或 `noreply@brevo.com`
   - 操作：**永远不要将其发送至垃圾邮件**
3. 保存

### 3. 检查 Gmail 设置

1. Gmail 设置 → 常规
2. 检查是否有自动过滤规则
3. 暂时禁用相关过滤规则测试

---

## 💡 临时解决方案（测试用）

### 方案 A: 使用不同的邮箱测试

尝试发送到：
- Outlook/Hotmail
- 163 邮箱
- QQ 邮箱

如果其他邮箱能收到，说明问题在 Gmail 的过滤。

### 方案 B: 使用 Gmail 别名测试

Gmail 支持别名：
- `yourname+test@gmail.com` = `yourname@gmail.com`
- 尝试用别名注册测试

---

## 🔍 检查邮件是否真的发送了

### 方法 1: Brevo 详细日志

1. Brevo Dashboard → Statistics
2. 点击 "Sent" 状态的邮件
3. 查看详细信息：
   - 发送时间
   - 收件服务器
   - 是否有退回记录

### 方法 2: 检查 Gmail 延迟

- Gmail 有时会有 5-15 分钟的延迟
- 等待一段时间再检查

### 方法 3: Gmail 全部邮件

搜索 `in:all from:brevo` 查看所有来自 Brevo 的邮件

---

## ✅ 推荐行动方案

### 立即（现在）

1. ✅ **检查垃圾邮件文件夹**
2. ✅ **搜索 `in:all Citea`**
3. ✅ **等待 5-10 分钟**（Gmail 延迟）

### 短期（今天）

1. ✅ **添加发件人到联系人**
2. ✅ **创建 Gmail 过滤器**
3. ✅ **验证域名**（如果有自定义域名）

### 长期（生产环境）

1. ✅ **验证自定义域名**
2. ✅ **配置 SPF/DKIM/DMARC**
3. ✅ **使用验证过的发件邮箱**

---

## 🎯 测试建议

### 现在可以尝试：

1. **检查所有位置**（垃圾邮件、促销标签）
2. **搜索所有邮件**: `in:all Citea`
3. **等待 10 分钟**后再次检查
4. **告诉我结果**，我们继续排查

如果还是找不到，我们可以：
- 检查 Brevo 的详细发送日志
- 验证发件域名
- 尝试其他收件邮箱测试

---

**最关键的是先检查垃圾邮件文件夹和用 `in:all` 搜索！**

