# ⚠️ 重要说明 - 部署建议

## 🚨 Cloudflare Pages 限制

**问题**: Cloudflare Pages 的静态导出模式不支持 Next.js API 路由

Citea 项目使用了 3 个 API 路由：
- `/api/find-sources` - 文献搜索
- `/api/check-citations` - 引用验证
- `/api/chat` - AI 对话

这些 API 路由需要服务器端运行，而 Cloudflare Pages 的标准部署不支持。

---

## ✅ 推荐解决方案：使用 Vercel

### 为什么选择 Vercel？

1. ✅ **原生支持 Next.js** - Vercel 是 Next.js 的开发团队
2. ✅ **完美支持 API 路由** - 自动转为 Serverless Functions
3. ✅ **零配置部署** - 直接连接 GitHub 即可
4. ✅ **免费额度充足** - 个人项目完全够用
5. ✅ **全球 CDN** - 速度极快
6. ✅ **自动 HTTPS** - 免费 SSL 证书

---

## 🚀 Vercel 部署步骤（3分钟）

### 1. 访问 Vercel
打开: https://vercel.com

### 2. 导入 GitHub 仓库
1. 点击 **"New Project"**
2. 选择 **"Import Git Repository"**
3. 找到 `Mercury-nju/Citea`
4. 点击 **"Import"**

### 3. 配置项目（自动完成）
Vercel 会自动检测：
```
Framework Preset: Next.js ✅
Build Command: npm run build ✅
Output Directory: .next ✅
Install Command: npm install ✅
```

**无需任何修改！**

### 4. 点击 Deploy
等待 2-3 分钟

### 5. 完成！🎉
您会得到一个 URL：
```
https://citea.vercel.app
或
https://citea-mercury-nju.vercel.app
```

---

## 📊 Vercel vs Cloudflare Pages

| 特性 | Vercel | Cloudflare Pages |
|------|--------|------------------|
| Next.js API 路由 | ✅ 完美支持 | ❌ 需要额外配置 |
| 部署难度 | ⭐ 极简单 | ⭐⭐⭐ 复杂 |
| 构建速度 | ⚡⚡ 非常快 | ⚡ 较快 |
| 免费额度 | ✅ 慷慨 | ✅ 慷慨 |
| 自定义域名 | ✅ 免费 | ✅ 免费 |
| SSL 证书 | ✅ 自动 | ✅ 自动 |
| Next.js 优化 | ✅ 原生 | 🟡 基础 |

---

## 🎯 推荐操作

### 立即行动：

1. ✅ **停止 Cloudflare Pages 部署**
2. ✅ **访问 Vercel.com**
3. ✅ **连接 GitHub 仓库**
4. ✅ **点击 Deploy**
5. ✅ **等待 2-3 分钟**
6. ✅ **完成！**

---

## 💡 如果坚持使用 Cloudflare

需要以下步骤（复杂）：

### 方案 1: 使用 Cloudflare Workers
1. 将 API 路由改为 Cloudflare Workers
2. 修改代码结构
3. 配置 wrangler
4. 单独部署 Workers

### 方案 2: 使用外部 API
1. 将 API 部署到其他服务（Vercel Functions）
2. 修改前端调用地址
3. 处理 CORS 问题

---

## ✨ 最简单的方案

**使用 Vercel！**

- 零配置
- 完美兼容
- 3 分钟部署成功
- 所有功能正常工作

---

## 📞 需要帮助？

如果您想：
1. **使用 Vercel** - 直接访问 vercel.com 导入项目即可
2. **坚持 Cloudflare** - 需要重构 API 代码（建议不要这样做）

---

<div align="center">

## 🎉 强烈建议使用 Vercel

**3 分钟部署成功，无需任何配置修改**

**https://vercel.com/new**

点击 Import → 选择 GitHub 仓库 → Deploy → 完成！

</div>

---

## 当前代码状态

✅ 代码已优化
✅ 构建成功
✅ 无错误
✅ 准备部署到 Vercel
❌ 不适合 Cloudflare Pages（除非重构）

---

**建议**: 立即使用 Vercel 部署，5 分钟后您的网站就会上线！

